
#include <bits/stdc++.h>
using namespace std;

int val(char c){
    return c-'A'+1;
}

int main(){
    string txt,pat;

    cout<<"Enter text: ";
    getline(cin,txt);
    cout<<"Enter pattern: ";
    getline(cin,pat);

    int n=txt.size();
    int m= pat.size();

    int tv=0;
    for(char c:pat){
        tv+=val(c);
    }

    unordered_map<int,vector<int>>mp;

    int pv=0;
    for(int i=0;i<m;i++){
        pv+=val(txt[i]);
    }

    mp[pv].push_back(0);

    for(int i=1;i<=n-m;i++) {
        pv=pv-val(txt[i-1])+val(txt[i+m-1]);
        mp[pv].push_back(i);
    }

    if(mp.find(tv)!=mp.end()){
        for(int idx : mp[tv]) {
            if(txt.substr(idx,m)==pat) {
                cout<<"Pattern found at index "<<idx<<endl;
            }
        }
    }
    else{
        cout<<"Pattern not found"<<endl;
    }

    return 0;
}
